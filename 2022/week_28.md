## 07-04

**OUTPUT HARDWARE**

​	Output hardware consists of external devices that transfer information from the computer’s CPU to the computer user. A video display, or screen, converts information generated by the computer into visual information. Displays commonly take one of two forms: a video screen with a **cathode ray tube(阴极射线管)** (CRT) or a video screen with a liquid crystal display (LCD). A CRT-based screen, or monitor, looks similar to a television set. Information from the CPU is displayed using a beam of electrons that scans a phosphorescent surface that emits light and creates images. An LCD-based screen displays visual information on a flatter and smaller screen than a CRT-based video monitor. LCDs are frequently used in laptop computers. 

​	Printers take text and image from a computer and print them on paper. Dot-matrix printers use tiny wires to impact upon an inked ribbon to form characters. Laser printers employ beams of light to draw images on a drum that then **picks up（捡起、吸收）** **fine black particles（黑色细小颗粒）** called **toner（粉末）**. The toner is **fused（融合）** to a page to produce an image. **Inkjet（喷墨）** printers fire **droplets（小滴）** of ink onto a page to form characters and pictures. 



**STORAGE HARDWARE** 

​	Storage hardware provides permanent storage of information and programs for **retrieval（找回）** by the computer. The two main types of storage devices are disk drives and memory. There are several types of disk drives: hard, floppy, magneto-optical, and compact. Hard disk drives store information in magnetic particles embedded in a disk. Usually a permanent part of the computer, hard disk drives can store large amounts of information and retrieve that information very quickly. Floppy disk drives also store information in magnetic particles embedded in removable disks that may be floppy or rigid. Floppy disks store less information than a hard disk drive and retrieve the information at a much slower rate. Magneto-optical disc drives store information on removable discs that are sensitive to both laser light and magnetic fields. They can typically store as much information as hard disks but have slightly slower retrieval speeds. Compact disc drives (CD-ROM) store information on pits burned into the surface of a disc of reflective material.  The information stored on CD-ROMs cannot be erased or overwritten with new information. They can store about as much information as a hard drive but have a slower rate of information retrieval. 

​	Memory refers to the computer chips that store information for quick retrieval by the CPU. Random access memory (RAM) is used to store the information and instructions that operate the computer’s programs. Typically, programs are transferred from storage on a disk drive to RAM. RAM is also known as volatile memory because the information within the computer chips is lost when power to the computer is turned off. Read-only memory (ROM) contains critical information and software that must be permanently available for computer operation, such as the operating system that directs the computer’s actions from start up to shut down. ROM is called nonvolatile memory because the memory chips do not lose their information when power to the computer is turned off. 

​	Some devices serve more than one purpose. For example, floppy disks may also be used as input devices if they contain information to be used and processed by the computer user. In addition, they can be used as output devices if the user wants to store the results of computations on them. 



**HARDWARE CONNECTIONS**

​	To function, hardware requires physical connections that allow components to communicate and interact. A bus provides a common interconnected system composed of a group of wires or circuitry that **coordinates（坐标、协调）** and moves information between the internal parts of a computer. A computer bus consists of two channels: one that the CPU uses to locate data, called the address bus, and another to send the data to that address, called the data bus. A bus is characterized by two features: how much information it can manipulate at one time, called the bus width, and how quickly it can transfer these data. 

​	A serial connection is a wire or set of wires used to transfer information from the CPU to an external device such as a mouse, keyboard, modem, scanner, and some types of printers. This type of connection transfers only one piece of data at a time, and is therefore slow. The advantage to using a serial connection is that it provides effective connections over long distances. 

​	A parallel connection uses multiple sets of wires to transfer blocks of information simultaneously. Most scanners and printers use this type of connection. A parallel connection is much faster than a serial connection, but it is limited to distances of less than 3 m (10 ft) between the CPU and the external device. 



## 07-05:

​	The PCI  bus is fine for attaching high-speed **peripherals（外围设备）** to a computer, but it is far too expensive to have a PCI interface for each low-speed I/O device such as a keyboard or mouse. Historically, each standard I/O device was connected to the computer in a special way, with some free ISA and PCI slots for adding new devices. Unfortunately, this scheme has been **fraught（充满）** with problems from the beginning. For example, each new I/O device often comes with its own ISA or PCI card. The user is often responsible for setting switches and jumpers on the card and making sure the settings do not conflict with other cards. Then the user must open up the case, carefully insert the card, close the case, and reboot the computer. For many users, this process is difficult and error **prone（倾向）**. In addition, the number of ISA and PCI slots is very limited (two or three typically). Plug ’n Play cards eliminate the jumper settings, but the user still has to open the computer to insert the card and bus slots are still limited. 

​	To deal with this problem, in the mid 1990s, **representatives（代表）** from seven companies (Compaq , DEC , IBM , Intel , Microsoft , NEC , and Northern Telecom ) got together to design a better way to attach low-speed I/O devices to a computer. Since then, hundreds of other companies have joined them. The resulting standard is called USB and it is being widely implemented in personal computers. 

​	Some of the goals of the companies that originally **conceived（构想）** of the USB and started the project were as follows: 

- Users must not have to set switches or jumpers on boards or devices. 
-  Users must not have to open the case to install new I/O devices. 
- There should be only one kind of cable, good for connecting all devices. 
-  I/O devices should get their power from the cable. 
-  Up to 127 devices should be attachable to a single computer. 
-  The system should support real-time devices (e.g., sound, telephone). 
- Devices should be installable while the computer is running. 
-  No reboot should be needed after installing a new device. 
-  The new bus and its I/O devices should be **inexpensive（廉价的）** to manufacture. 

​	USB meets all these goals. It is designed for low-speed devices such as keyboards, mice, still cameras, snapshot scanners, digital telephones, and so on. The total USB bandwidth is 1.5 MB/sec , which is enough for a **substantial（大量的、结实的）** number of these devices. This low limit was chosen to keep the cost down. 

​	A USB system consists of a root hub that plugs into the main bus (see Figure 2B-1). This hub has sockets for cables that can connect to I/O devices or to expansion hubs, to provide more sockets, so the **topology（拓扑学）** of a USB system is a tree with its root at the root hub, inside the computer. The cables have different connectors on the hub end and on the device end, to prevent people from accidentally connecting two hub sockets together. The cable consists of four wires: two for data, one for power (+5 volts), and one for ground. The signaling system transmits a 0 as a voltage transition and a 1 as the absence of a voltage transition, so long runs of 0s generate a regular pulse stream. 

​	When a new I/O device is plugged in, the root hub detects this event and interrupts the operating system. The operating system then queries the device to find out what it is and how much USB bandwidth it needs. If the operating system decides that there is enough bandwidth for the device, it assigns the new device a unique address (1 – 127) and downloads this address and other information to configuration registers inside the device. In this way, new devices can be added on-the-fly, without any user configuration required and without having to install new ISA or PCI cards. Uninitialized cards start out with address 0, so they can be addressed. To make the cabling simpler, many USB devices contain built-in hubs to accept additional USB devices. For example, a monitor might have two hub sockets to accommodate the left and right speakers. 

​	Logically, the USB system can be viewed as a set of bit pipes from the root hub to the I/O devices. Each device can split its bit pipe up into at most 16 sub-pipes for different types of data (e.g., audio and video). Within each pipe or sub-pipe, data flows from the root hub to the device or the other way . There is no traffic between two I/O devices. 

​	Precisely every 1.00 ± 0.05 msec , the root hub **broadcasts（广播）** a new frame to keep all the devices synchronized in time. A frame is associated with a bit pipe, and consists of packets, the first of which is from the root hub to the device. Subsequent packets in the frame may also be in this direction, or they may be back from the device to the root hub. A sequence of four frames is shown in Figure 2B-2. In Figure 2B-2 there is no work to be done in frames 0 and 2, so all that is needed is one SOF (Start of Frame) packet. This packet is always broadcast to all devices. Frame 1 is a poll, for example, a request to a scanner to return the bits it has found on the image it is scanning. Frame 3 consists of delivering data to some device, for example to a printer.

​	USB supports four kinds of frames: control, isochronous, bulk, and interrupt. Control frames are used to configure devices, give them commands, and inquire about their status. Isochronous frames are for real-time devices such as microphones, loudspeakers, and telephones that need to send or accept data at precise time intervals. They have a highly-predictable delay but provide no **retransmissions（重传）** in the event of errors. Bulk frames are for large transfers to or from devices with no real-time requirements such as printers. Finally, interrupt frames are needed because USB does not support interrupts. For example, instead of having the keyboard cause an interrupt whenever a key is struck, the operating system can poll it every 50 msec to collect any pending keystrokes. 

​	A frame consists of one or more packets, possibly some in each direction. Four kinds of packets exist: token, data, handshake, and special. Token packets are from the root to a device and are for system control. The SOF, IN, and OUT packets in Figure 2B-2 are token packets. The SOF (Start of Frame) packet is the first one in each frame and marks the beginning of the frame. If there is no work to do, the SOF packet is the only one in the frame. The IN token packet is a poll, asking the device to return certain data. Fields in the IN packet tell which bit pipe is being polled so the device knows which data to return (if it has multiple streams). The OUT token packet announces that data for the device will follow. A fourth type of token packet, SETUP (not shown in the figure), is used for configuration. 

​	Besides the token packet, three other kinds exist. These are DATA (used to transmit up to 64 bytes of information either way), handshake, and special packets. The format of a data packet is shown in Figure 2B-2. It consists of an 8-bit synchronization field, an 8-bit packet type (PID ), the payload, and a 16-bit CRC(Cyclic Redundancy Code) to detect errors. Three kinds of handshake packets are defined: ACK(the previous data packet was correctly received), NAK (a CRC error was detected), and STALL (please wait—I am busy right now). 

​	Now let us look at Figure 2B-2 again. Every 1.00 msec a frame must be sent from the root hub, even if there is no work. Frames 0 and 2 consist of just an SOF packet, indicating that there was no work. Frame 1 is a poll, so it starts out with SOF and IN packets from the computer to the I/O device, followed by a DATA packet from the device to the computer. The ACK packet tells the device that the data were received correctly. In case of an error, a NAK would be sent back to the device and the packet would be retransmitted for bulk data (but not for isochronous data). Frame 3 is similar in structure to frame 1, except that now the flow of data is from the computer to the device. 